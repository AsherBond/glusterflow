<html>{% load staticfiles %}
<head>
    <script src="{% static 'ui/js/raphael-min.js.gz' %}"></script>
    <script src="{% static 'ui/js/g.raphael-min.js.gz' %}"></script>
    <script src="{% static 'ui/js/g.bar-min.js.gz' %}"></script>
    <script src="{% static 'ui/js/g.dot-min.js.gz' %}"></script>
    <script src="{% static 'ui/js/g.line-min.js.gz' %}"></script>
    <script src="{% static 'ui/js/g.pie-min.js.gz' %}"></script>
    <script>
        window.onload = function () {
            var r;
            // Set up the barchart and hover animation
            r  = Raphael("chart"),
                fin = function () {
                    this.flag = r.popup(this.bar.x, this.bar.y, this.bar.value || "0").insertBefore(this);
                },
                fout = function () {
                    this.flag.animate({opacity: 0}, 300, function () {this.remove();});
                },
                txtattr = { font: "13px sans-serif" };

            // Render the barchart
            r.barchart(0, 0, 600, 260, [

                // Create the array of column values
                {% for count in counts %}
                    {{ count }},
                {% endfor %}
                    ],{'type': 'soft', 'colors': [

                // Create the array of colour values
                {% for count in counts %}
                    {% if count != highest_count %}
                        "blue",
                    {% else %}
                        "red",
                    {% endif %}
                {% endfor %}
                    ]}).hover(fin, fout);

            // Render the accompanying text
            r.text(115, 250, "File operations over the past 4 hours").attr(txtattr);
            r.text(115, 268, "Each bar is 20 minutes").attr(txtattr);
        };
    </script>
</head>
<body>
    <h2>GlusterFlow : Host usage profile over time</h2>
    Data from {{ right_now }}
    <div id="chart"></div>
    <div id="info_rows">
        <h3>Busiest files</h3>
        <table>
            <tr><th align="left">Filename</td><th># of file operations</td></tr>
            {% for row in busiest_files %}
            <tr><td align="left">{{ row.0 }}</td><td>{{ row.1 }}</td></tr>
            {% endfor %}
        </table>
    </div>
    <br />
    <div id="extra">
        This page took {{ processing_time }} seconds to create.
    </div>
</body>
</html>
