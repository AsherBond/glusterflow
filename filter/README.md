GlusterFlow volume filter for GlusterFS
---------------------------------------

This is a GlusterFS "filter" script.  It automatically adds the GlusterFlow
client to all of your GlusterFS volume files.

Using it
--------

__1. Create the GlusterFS filter directory if it doesn't exist__

    $ sudo mkdir -p /usr/lib64/glusterfs/GLUSTER_VERSION/filter

__2. Copy (not link) the filter file into the filter directory__

Next, copy the glusterflowfilter.sh file to this new filter directory.

    $ sudo cp -f glusterflowfilter.sh /usr/lib64/glusterfs/GLUSTER_VERSION/filter/

Don't try soft linking (eg link -s) instead of copying, since it doesn't seem
to work.  Soft linking seems to trigger AVC denials due to the SELinux
security context of the target.

__3. Make it executable__

    $ sudo chmod 755 /usr/lib64/glusterfs/GLUSTER_VERSION/filter/glusterflowfilter.sh

__4. Update SELinux security context__

If the system has SELinux enabled, update the SELinux security context for
the filter:

    $ sudo restorecon -RF /usr/lib64/glusterfs/GLUSTER_VERSION/filter/

__5. Regenerate your volume files__

One way to do this is by turning profiling on then off for a volume:

    $ sudo gluster volume profile VOLUME_NAME start
    $ sudo gluster volume profile VOLUME_NAME stop

__6. (optional) Check the log file generated by this script__

If the log file isn't present then either the DEBUG flag is set to 0 in the
script (you can change this), or the script isn't being run and you'll need
to figure out why.

    $ cat /var/log/glusterfs/filter.log
